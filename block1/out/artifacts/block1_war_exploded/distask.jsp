<%--
  Created by IntelliJ IDEA.
  User: xixi
  Date: 2018/6/19
  Time: 上午11:30
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core"  prefix="c"%>

<html>
<head>
    <title>distask</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/distask/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/axure/axQuery.js"></script>
    <script src="resources/scripts/axure/globals.js"></script>
    <script src="resources/scripts/axutils.js"></script>
    <script src="resources/scripts/axure/annotation.js"></script>
    <script src="resources/scripts/axure/axQuery.std.js"></script>
    <script src="resources/scripts/axure/doc.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/messagecenter.js"></script>
    <script src="resources/scripts/axure/events.js"></script>
    <script src="resources/scripts/axure/recording.js"></script>
    <script src="resources/scripts/axure/action.js"></script>
    <script src="resources/scripts/axure/expr.js"></script>
    <script src="resources/scripts/axure/geometry.js"></script>
    <script src="resources/scripts/axure/flyout.js"></script>
    <script src="resources/scripts/axure/ie.js"></script>
    <script src="resources/scripts/axure/model.js"></script>
    <script src="resources/scripts/axure/repeater.js"></script>
    <script src="resources/scripts/axure/sto.js"></script>
    <script src="resources/scripts/axure/utils.temp.js"></script>
    <script src="resources/scripts/axure/variables.js"></script>
    <script src="resources/scripts/axure/drag.js"></script>
    <script src="resources/scripts/axure/move.js"></script>
    <script src="resources/scripts/axure/visibility.js"></script>
    <script src="resources/scripts/axure/style.js"></script>
    <script src="resources/scripts/axure/adaptive.js"></script>
    <script src="resources/scripts/axure/tree.js"></script>
    <script src="resources/scripts/axure/init.temp.js"></script>
    <script src="files/distask/data.js"></script>
    <script src="files/distask/distask.js"></script>
    <script src="resources/scripts/axure/legacy.js"></script>
    <script src="resources/scripts/axure/viewer.js"></script>
    <script src="resources/scripts/axure/math.js"></script>
    <script type="text/javascript">
        $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
        $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
        $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>

</head>
<body>
<div id="base" class="">

    <!-- Unnamed (Rectangle) -->




    <!-- footer (Group) -->
    <div id="u252" class="ax_default" data-label="footer">

        <!-- Unnamed (Rectangle) -->
        <div id="u253" class="ax_default _默认样式">
            <img id="u253_img" class="img " src="images/consulttask/u47.png"/>
            <!-- Unnamed () -->
            <div id="u254" class="text" style="visibility: visible;">
                <p><span>Copyright © </span><a id="u255" class="link" title="点击打开www.AxureUX.com"><span>www.AxureUX.com</span></a><span>, All Rights Reserved.</span></p><p><span>Email : </span><a id="u256" class="link" title="点击发送邮件"><span>5698401@qq.com</span></a><span>&nbsp; QQ: 5698401</span></p>
            </div>
        </div>
    </div>

    <!-- 灰色背景 (Dynamic Panel) -->
    <div id="u257" class="ax_default" data-label="灰色背景">
        <div id="u257_state0" class="panel_state" data-label="State1">
            <div id="u257_state0_content" class="panel_state_content">
            </div>
        </div>
    </div>



    <!-- 灰色背景 (Dynamic Panel) -->
    <div id="u259" class="ax_default" data-label="灰色背景">
        <div id="u259_state0" class="panel_state" data-label="State1">
            <div id="u259_state0_content" class="panel_state_content">
            </div>
        </div>
    </div>

    <!-- 线条 (Dynamic Panel) -->
    <div id="u260" class="ax_default" data-label="线条">
        <div id="u260_state0" class="panel_state" data-label="State1">
            <div id="u260_state0_content" class="panel_state_content">
            </div>
        </div>
    </div>

    <!-- 页面标题 (Rectangle) -->
    <div id="u261" class="ax_default _默认样式" data-label="页面标题">
        <div id="u261_div" class=""></div>
        <!-- Unnamed () -->
        <div id="u262" class="text" style="display: none; visibility: hidden">
            <p><span></span></p>
        </div>
    </div>

    <form action="" method="post">

        <div id="u263" class="ax_default" data-label="Input field">
            <input id="u263_input" type="text" name="taskID" value=""/>
        </div>

        <!-- Unnamed (Rectangle) -->
        <div id="u264" class="ax_default label">
            <div id="u264_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u265" class="text" style="visibility: visible;">
                <p><span>任务单号</span></p>
            </div>
        </div>

        <!-- Input Message (Rectangle) -->
        <div id="u266" class="ax_default" data-label="Input Message">
            <div id="u266_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u267" class="text" style="display: none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>

        <!-- Date Field (Text Field) -->
        <div id="u268" class="ax_default" data-label="Date Field">
            <input id="u268_input" type="text" name="date" value=""/>
        </div>

        <!-- Unnamed (Image) -->
        <div id="u269" class="ax_default image">
            <img id="u269_img" class="img " src="images/consulttask/u89.png"/>
            <!-- Unnamed () -->
            <div id="u270" class="text" style="display: none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>

        <!-- Unnamed (Rectangle) -->
        <div id="u271" class="ax_default label">
            <div id="u271_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u272" class="text" style="visibility: visible;">
                <p><span>要求完成日期</span></p>
            </div>
        </div>

        <!-- Unnamed (Rectangle) -->
        <div id="u275" class="ax_default label">
            <div id="u275_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u276" class="text" style="visibility: visible;">
                <p><span>任务类型</span></p>
            </div>
        </div>

        <!-- Unnamed (Rectangle) -->
        <div id="u273" class="ax_default label">
            <div id="u273_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u274" class="text" style="visibility: visible;">
                <p><span>任务状态</span></p>
            </div>
        </div>

        <!-- Unnamed (Group) -->
        <div id="u373" class="ax_default">

            <!-- middle (Rectangle) -->
            <div id="u374" class="ax_default" data-label="middle">
                <div id="u374_div" class=""></div>
                <!-- Unnamed () -->
                <div id="u375" class="text" style="display: none; visibility: hidden">
                    <p><span></span></p>
                </div>
            </div>

            <!-- Input Field Dropdown (Text Field) -->
            <div id="u376" class="ax_default text_field" data-label="Input Field Dropdown">
                <%--<input id="u376_input" type="text" value=""/>--%>
                <select name="type" id="u376_input">
                    <option value="0">送货</option>
                    <option value="1">退货</option>
                </select>
            </div>


        </div>


        <div id="u382" class="ax_default">

            <!-- middle (Rectangle) -->
            <div id="u383" class="ax_default" data-label="middle">
                <div id="u383_div" class=""></div>
                <!-- Unnamed () -->
                <div id="u384" class="text" style="display: none; visibility: hidden">
                    <p><span></span></p>
                </div>
            </div>

            <!-- Input Field Dropdown (Text Field) -->
            <div id="u385" class="ax_default text_field" data-label="Input Field Dropdown">
                <%--<input id="u385_input" type="text" value=""/>--%>
                <select name="state" id="u385_input">
                    <option value="3">可分配</option>
                    <option value="4">已分配</option>

                </select>
            </div>


        </div>

    </form>
    <!-- Input field (Text Field) -->












    <!-- Unnamed (Group) -->
    <div id="u463" class="ax_default" onclick="submitConsult()">

        <!-- Unnamed (Right Arrow Button) -->
        <div id="u464" class="ax_default primary_button">
            <img id="u464_img" class="img " src="images/consulttask/u205.png"/>
            <!-- Unnamed () -->
            <div id="u465" class="text" style="visibility: visible;">
                <p><span>查询</span></p>
            </div>
        </div>

        <!-- Unnamed (Shape) -->
        <div id="u466" class="ax_default icon">
            <img id="u466_img" class="img " src="images/consulttask/u207.png"/>
            <!-- Unnamed () -->
            <div id="u467" class="text" style="display: none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>
    </div>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id="data">
        <table>
            <tr>
                <th>任务单号</th>
                <th>要求完成日期</th>
                <th>任务类型</th>
                <th>任务状态</th>
                <th>配送员</th>
                <th></th>
            </tr>
            <c:forEach items="${datalist}" var="data">
                <tr>
                    <td>
                        <a href="taskDetailServlet?taskID=${data.missionID}" target="_blank">
                                ${data.missionID}
                        </a>
                    </td>
                    <td>${data.date}</td>
                    <td>${data.type}</td>
                    <td>${data.state}</td>
                    <c:if test="${data.state=='可分配'}">
                        <td>
                            <select id="C${data.missionID}"name="courier" onchange="submitCourier('${data.missionID}','C${data.missionID}')" >
                                <c:if test="${data.courier.name!=''}">
                                    <option value="${data.courier.CID}">${data.courier.name}</option>
                                </c:if>
                                <c:if test="${data.courier.name==''}">
                                    <option value="0">未分配</option>

                                </c:if>
                                <c:forEach items="${couriers}" var="c">
                                    <c:if test="${c.CID!=data.courier.CID}">
                                        <option value="${c.CID}">${c.name}</option>
                                    </c:if>

                                </c:forEach>
                            </select>
                        </td>
                    </c:if>
                    <c:if test="${data.state!='可分配'}">
                        <td>
                            ${data.courier.name}
                        </td>
                    </c:if>
                    <td id="backC${data.missionID}"></td>
                </tr>
            </c:forEach>
        </table>
    </div>


    <!--页数-->
    <center>
        <div>
            <ul>

                <c:forEach begin="1" end="${pagecount}" var="p">
                    <c:if test="${p==pagenum}">
                        <input id="pageNum" value="${pagenum}" type="hidden">
                        <li><a>${p}</a></li>
                    </c:if>
                    <c:if test="${p!=pagenum}">
                        <li><a href="consultTaskServlet?action=1&pagenum=${p}">${p}</a> </li>
                    </c:if>
                </c:forEach>
            </ul>
        </div>
    </center>
</div>
</body>
</html>
